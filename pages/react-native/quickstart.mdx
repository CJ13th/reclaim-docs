import { Steps, Callout } from 'nextra/components'

<Steps>

## Installation <a name="installation"></a>

### Install the package

```bash
npm i @reclaimprotocol/reclaim-react-native
```

## Configuration <a name="configuration"></a>

### Configure your Babel configuration

```jsx showLineNumbers filename="babel.config.js"
module.exports = {
  presets: ['module:metro-react-native-babel-preset'],
  plugins: [
    [
      'module-resolver',
      {
        root: ['.'],
        alias: {
          '@app': './src',
          '@ethersproject/pbkdf2': './resolver.js',
        },
      },
    ],
    [
      'module:react-native-dotenv',
      {
        moduleName: '@env',
        path: '.env',
      },
    ],
  ],
}
```

### Update Metro configuration for React Native

```jsx showLineNumbers filename="metro.config.js"
const path = require('path');
const nodeModulesPaths = [path.resolve(path.join(__dirname, './node_modules'))];
// mock for all the modules we aren't using
const MOCK_MODULE = path.resolve(__dirname, 'node_modules/url');

module.exports = {
  transformer: {
    getTransformOptions: async () => ({
      transform: {
        experimentalImportSupport: false,
        inlineRequires: true,
      },
    }),
  },
  resolver: {
    nodeModulesPaths,
    extraNodeModules: {
      // Redirect react-native to react-native-web
      net: path.resolve(__dirname, 'node_modules/react-native-tcp-socket'),
      crypto: path.resolve(__dirname, 'node_modules/react-native-crypto'),
      http: MOCK_MODULE, // path.resolve(__dirname, 'node_modules/stream-http'),
      buffer: path.resolve(__dirname, 'node_modules/buffer/'),
      https: MOCK_MODULE, //path.resolve(__dirname, 'node_modules/https-browserify'),
      zlib: path.resolve(__dirname, 'node_modules/browserify-zlib'),
      stream: path.resolve(__dirname, 'node_modules/stream-browserify'),
      tls: path.resolve(__dirname, 'node_modules/react-native-tcp-socket'),
      util: path.resolve(__dirname, 'node_modules/util'),
      dns: MOCK_MODULE, //path.resolve(__dirname, 'node_modules/dns.js'),
      http2: MOCK_MODULE, //path.resolve(__dirname, 'node_modules/http2'),
      url: path.resolve(__dirname, 'node_modules/url'),
      assert: path.resolve(__dirname, 'node_modules/assert'),
      events: path.resolve(__dirname, 'node_modules/events'),
      fs: MOCK_MODULE, // path.resolve(__dirname, 'node_modules/react-native-level-fs'),
      dgram: MOCK_MODULE, // path.resolve(__dirname, 'node_modules/react-native-udp'),
      os: path.resolve(__dirname, 'node_modules/react-native-os'),
      path: path.resolve(__dirname, 'node_modules/path-browserify'),
      constants: path.resolve(__dirname, 'node_modules/constants-browserify'),

      perf_hooks: MOCK_MODULE,

      child_process: MOCK_MODULE,
    },
  },
  // options for reading data outside root react-native folder
  projectRoot: __dirname,
  watchFolders: [__dirname],
};
```

### Redirect `pbkdf2` calls to 'react-native-quick-crypto'

```jsx showLineNumbers filename="resolver.js"
const crypto = require('react-native-quick-crypto')
exports.pbkdf2 = crypto.pbkdf2Sync
```

## Dependencies <a name="dependencies"></a>

### Modify the package.json

Modify the following dependencies and run `npm install`.

```jsx
    "@azure/core-asynciterator-polyfill": "^1.0.2",
    "@ethersproject/shims": "^5.7.0",
    "@gorhom/bottom-sheet": "^4.4.5",
    "@react-native-async-storage/async-storage": "^1.18.1",
    "@react-native-cookies/cookies": "^6.2.1",
    "@reclaimprotocol/common-grpc-web-transport": "github:questbook/common-grpc-web-transport",
    "@reclaimprotocol/crypto-sdk": "^1.4.0",
    "@reclaimprotocol/reclaim-client-sdk": "^0.0.8",
    "@reclaimprotocol/reclaim-node": "^1.0.2",
    "@reclaimprotocol/reclaim-sdk": "^4.7.0",
    "@reclaimprotocol/reclaim-zk": "^1.0.0",
    "@reduxjs/toolkit": "^1.9.2",
    "@stablelib/chacha20poly1305": "^1.0.1",
    "assert": "^2.0.0",
    "babel-plugin-module-resolver": "^5.0.0",
    "base-64": "^1.0.0",
    "browserify-zlib": "^0.2.0",
    "buffer": "git+https://github.com/jrschumacher/buffer#add-base64url-support",
    "canonicalize": "^2.0.0",
    "constants-browserify": "^1.0.0",
    "dns.js": "^1.0.1",
    "ethers": "^5.7.2",
    "events": "^3.3.0",
    "http2": "^3.3.7",
    "https-browserify": "^1.0.0",
    "jsdom-jscore-rn": "^0.1.8",
    "lodash": "^4.17.21",
    "minisearch": "^6.1.0",
    "net": "^1.0.2",
    "nice-grpc-web": "^2.0.2",
    "patch-package": "^6.5.1",
    "path-browserify": "^1.0.1",
    "pluralize": "^8.0.0",
    "process": "^0.11.10",
    "react-minisearch": "^6.0.2",
    "react-native-camera": "^4.2.1",
    "react-native-code-push": "^8.0.0",
    "react-native-crypto": "^2.2.0",
    "react-native-dotenv": "^3.4.7",
    "react-native-fs": "^2.20.0",
    "react-native-gesture-handler": "^2.9.0",
    "react-native-get-random-values": "^1.8.0",
    "react-native-html-parser": "^0.1.0",
    "react-native-level-fs": "^3.0.1",
    "react-native-os": "^1.2.6",
    "react-native-permissions": "^3.6.1",
    "react-native-quick-crypto": "^0.6.1",
    "react-native-randombytes": "^3.6.1",
    "react-native-safe-area-context": "^4.5.0",
    "react-native-screens": "^3.19.0",
    "react-native-svg": "^13.8.0",
    "react-native-tcp-socket": "^6.0.6",
    "react-native-toast-message": "^2.1.6",
    "react-native-udp": "^4.1.7",
    "react-native-uuid": "^2.0.1",
    "react-native-version-check": "^3.4.7",
    "react-native-webview": "^11.26.1",
    "react-redux": "^8.0.5",
    "readable-stream": "^1.0.33",
    "redux": "^4.2.1",
    "redux-persist": "^6.0.0",
    "rn-fetch-blob": "^0.12.0",
    "sha3": "^2.1.4",
    "stream-browserify": "^3.0.0",
    "styled-components": "^5.3.6",
    "tls-browserify": "^0.2.2",
    "uri-scheme": "^1.1.0",
    "url": "^0.11.0",
    "util": "^0.12.5",
    "vm-browserify": "^0.0.4",
    "xpath": "^0.0.32"

    // Your other dependencies...
```

**For iOS only**: Delete `Podfile.lock` from your projectâ€™s `ios` folder and then run `pod install`.

## Usage <a name="usage"></a>


### Import ReclaimHttps and use it in your App:

```jsx showLineNumbers filename="App.tsx"
import React from 'react';
import {SafeAreaView, StyleSheet, useColorScheme} from 'react-native';
import {Colors} from 'react-native/Libraries/NewAppScreen';
import {ReclaimHttps} from '@reclaimprotocol/reclaim-react-native';

function App(): JSX.Element {
  const isDarkMode = useColorScheme() === 'dark';

  const backgroundStyle = StyleSheet.create({
    container: {
      backgroundColor: isDarkMode ? Colors.darker : Colors.lighter,
      flex: 1,
      justifyContent: 'center',
      alignItems: 'center',
    },
  });

  return (
    <SafeAreaView style={backgroundStyle.container}>
      <ReclaimHttps
        requestedProofs={[
          {
            url: 'https://bookface.ycombinator.com/home',
            loginUrl: 'https://bookface.ycombinator.com/home',
            loginCookies: ['_sso.key'], 
            responseSelections: [
              {
                responseMatch:
                  '\\{"id":{{YC_USER_ID}},.*?waas_admin.*?:{.*?}.*?:\\{.*?}.*?(?:full_name|first_name).*?}',
              },
            ],
          },
        ]}
        // context="Proving on 2023 for eth India" 
        title="YC Login"
        subTitle="Prove you have a YC Login"
        cta="Prove"
        onSuccess={proofs => {
          /*do something*/
          console.log('proofs', proofs);
        }}
        onFail={e => {
          /*do something*/
          console.log('Error', e);
        }}
      />
    </SafeAreaView>
  );
}

export default App;
```

**Properties in `ReclaimHttps`**:
- `url`: The URL from where the data is to be extracted.
- `loginUrl`: The URL to direct the user for login if required.
- `loginCookies`: Array of cookie names required for authentication.
- `responseMatch`: Regular expression to extract specific information from the webpage.
- `title`: Name of your application.
- `subTitle`: Short description about the claim.
- `cta`: Title of the action button.
- `onSuccess`: Function to handle success scenario.
- `onFail`: Function to handle failure scenario.

</Steps>